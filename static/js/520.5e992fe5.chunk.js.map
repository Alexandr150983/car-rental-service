{"version":3,"file":"static/js/520.5e992fe5.chunk.js","mappings":"sOAEO,MAAMA,EAAgBC,EAAAA,GAAOC,QAAOC,IAAAA,GAAAC,EAAAA,EAAAA,GAAA,sHAQ9BC,EAAcJ,EAAAA,GAAOK,GAAEC,IAAAA,GAAAH,EAAAA,EAAAA,GAAA,2IAQvBI,EAAUP,EAAAA,GAAOQ,OAAMC,IAAAA,GAAAN,EAAAA,EAAAA,GAAA,mYAqBvBO,EAAiBV,EAAAA,GAAOW,IAAGC,IAAAA,GAAAT,EAAAA,EAAAA,GAAA,kH,sBCpBxC,MAwEA,EAxEoBU,KAClB,MAAMC,GAAWC,EAAAA,EAAAA,MACXC,GAAOC,EAAAA,EAAAA,IAAYC,EAAAA,IACnBC,GAAUF,EAAAA,EAAAA,IAAYG,EAAAA,IACtBC,GAAQJ,EAAAA,EAAAA,IAAYK,EAAAA,IACpBC,GAAYN,EAAAA,EAAAA,IAAYO,EAAAA,KACvBC,EAAMC,IAAWC,EAAAA,EAAAA,UAAS,IAE1BC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,IAEvCG,EAAAA,EAAAA,YAAU,KACMC,kBACWjB,GAASkB,EAAAA,EAAAA,GAAU,CAAEP,OAAMQ,MALxC,OAOGC,QAAQC,OAPX,IAQRN,GAAW,EACb,EAGFO,EAAO,GACN,CAACtB,EAAUW,EAbA,KAed,MAMMY,EAAwBC,IAC5B,MAAMC,EAAsBhB,EAAUiB,MACnCC,GAAaA,EAASC,KAAOJ,EAAII,KAIlC5B,EADEyB,GACOI,EAAAA,EAAAA,IAAeL,EAAII,KAEnBE,EAAAA,EAAAA,IAAYN,GACvB,EAEF,OACEO,EAAAA,EAAAA,MAAC9C,EAAa,CAAA+C,SAAA,CACX3B,IACC4B,EAAAA,EAAAA,KAACrC,EAAc,CAAAoC,UACbC,EAAAA,EAAAA,KAACC,EAAAA,EAAM,OAGT7B,IACA0B,EAAAA,EAAAA,MAAAI,EAAAA,SAAA,CAAAH,SAAA,CACGzB,IAASwB,EAAAA,EAAAA,MAAA,KAAAC,SAAA,CAAG,UAAQzB,MACrB0B,EAAAA,EAAAA,KAAC3C,EAAW,CAAA0C,SACT9B,EAAKkC,KAAKZ,IACTS,EAAAA,EAAAA,KAACI,EAAAA,EAAO,CAENb,IAAKA,EACLc,iBAAkBf,EAClBgB,WAAY9B,EAAUiB,MACnBC,GAAaA,EAASC,KAAOJ,EAAII,MAJ/BJ,EAAII,QASdd,IACCmB,EAAAA,EAAAA,KAACxC,EAAO,CAAC+C,KAAK,SAASC,QAxCVC,KACjB5B,GACFF,GAAS+B,GAAaA,EAAW,GACnC,EAqCuDX,SAAC,mBAMxC,C","sources":["pages/CatalogPage/CatalogPage.styled.js","pages/CatalogPage/CatalogPage.jsx"],"sourcesContent":["import styled from \"styled-components\";\r\n\r\nexport const StyledCatalog = styled.section`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 1184px;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n`;\r\n\r\nexport const CarsWrapper = styled.ul`\r\n  display: grid;\r\n  grid-template-columns: repeat(4, 1fr);\r\n  grid-row-gap: 50px;\r\n  margin-bottom: 88px;\r\n  padding-top: 50px;\r\n`;\r\n\r\nexport const LoadBtn = styled.button`\r\n  display: block;\r\n  text-decoration: underline;\r\n  color: rgb(52, 112, 255);\r\n  border: none;\r\n  background-color: transparent;\r\n  margin-top: 100px;\r\n  margin-bottom: 138px;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  font-weight: 500;\r\n  font-size: 16px;\r\n  line-height: 1.5;\r\n  padding: 12px 24px;\r\n  cursor: pointer;\r\n\r\n  &:hover {\r\n    color: rgb(11, 68, 205);\r\n  }\r\n`;\r\n\r\nexport const CenteredLoader = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100vh;\r\n  width: 100%;\r\n`;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { fetchCars } from \"../../services/carApi\";\r\nimport {\r\n  selectAllCars,\r\n  selectCarsLoading,\r\n  selectCarsError,\r\n  selectFavorites,\r\n} from \"../../redux/Cars/selectors\";\r\nimport { addFavorite, removeFavorite } from \"../../redux/Cars/favoritesSlice\";\r\nimport CarCard from \"../../components/CarCard/CarCard\";\r\nimport {\r\n  CarsWrapper,\r\n  CenteredLoader,\r\n  LoadBtn,\r\n  StyledCatalog,\r\n} from \"./CatalogPage.styled\";\r\nimport Loader from \"../../components/Loader/Loader\";\r\n\r\nconst CatalogPage = () => {\r\n  const dispatch = useDispatch();\r\n  const cars = useSelector(selectAllCars);\r\n  const loading = useSelector(selectCarsLoading);\r\n  const error = useSelector(selectCarsError);\r\n  const favorites = useSelector(selectFavorites);\r\n  const [page, setPage] = useState(1);\r\n  const limit = 12;\r\n  const [hasMore, setHasMore] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetch = async () => {\r\n      const response = await dispatch(fetchCars({ page, limit }));\r\n\r\n      if (response.payload.length < limit) {\r\n        setHasMore(false);\r\n      }\r\n    };\r\n\r\n    fetch();\r\n  }, [dispatch, page, limit]);\r\n\r\n  const handleLoadMore = () => {\r\n    if (hasMore) {\r\n      setPage((prevPage) => prevPage + 1);\r\n    }\r\n  };\r\n\r\n  const handleFavoriteToggle = (car) => {\r\n    const isCurrentlyFavorite = favorites.some(\r\n      (favorite) => favorite.id === car.id\r\n    );\r\n\r\n    if (isCurrentlyFavorite) {\r\n      dispatch(removeFavorite(car.id));\r\n    } else {\r\n      dispatch(addFavorite(car));\r\n    }\r\n  };\r\n  return (\r\n    <StyledCatalog>\r\n      {loading && (\r\n        <CenteredLoader>\r\n          <Loader />\r\n        </CenteredLoader>\r\n      )}\r\n      {!loading && (\r\n        <>\r\n          {error && <p>Error: {error}</p>}\r\n          <CarsWrapper>\r\n            {cars.map((car) => (\r\n              <CarCard\r\n                key={car.id}\r\n                car={car}\r\n                onFavoriteToggle={handleFavoriteToggle}\r\n                isFavorite={favorites.some(\r\n                  (favorite) => favorite.id === car.id\r\n                )}\r\n              />\r\n            ))}\r\n          </CarsWrapper>\r\n          {hasMore && (\r\n            <LoadBtn type=\"button\" onClick={handleLoadMore}>\r\n              Load more\r\n            </LoadBtn>\r\n          )}\r\n        </>\r\n      )}\r\n    </StyledCatalog>\r\n  );\r\n};\r\n\r\nexport default CatalogPage;\r\n"],"names":["StyledCatalog","styled","section","_templateObject","_taggedTemplateLiteral","CarsWrapper","ul","_templateObject2","LoadBtn","button","_templateObject3","CenteredLoader","div","_templateObject4","CatalogPage","dispatch","useDispatch","cars","useSelector","selectAllCars","loading","selectCarsLoading","error","selectCarsError","favorites","selectFavorites","page","setPage","useState","hasMore","setHasMore","useEffect","async","fetchCars","limit","payload","length","fetch","handleFavoriteToggle","car","isCurrentlyFavorite","some","favorite","id","removeFavorite","addFavorite","_jsxs","children","_jsx","Loader","_Fragment","map","CarCard","onFavoriteToggle","isFavorite","type","onClick","handleLoadMore","prevPage"],"sourceRoot":""}